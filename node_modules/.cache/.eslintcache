[{"/Users/aleksejolejnik/dev/react-mesto-auth/src/index.js":"1","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/App.js":"2","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/EditProfilePopup.js":"3","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ImagePopup.js":"4","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Footer.js":"5","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Main.js":"6","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Header.js":"7","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/AddPlacePopup.js":"8","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ConfirmDeletePopup.js":"9","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/EditAvatarPopup.js":"10","/Users/aleksejolejnik/dev/react-mesto-auth/src/contexts/CurrentUserContext.js":"11","/Users/aleksejolejnik/dev/react-mesto-auth/src/utils/Api.js":"12","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Card.js":"13","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/PopupWithForm.js":"14","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Login.js":"15","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Register.js":"16","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/PageNotFound.js":"17","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/InfoTooltip.js":"18","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ProtectedRoute.js":"19","/Users/aleksejolejnik/dev/react-mesto-auth/src/utils/Auth.js":"20","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/NavBar.js":"21"},{"size":308,"mtime":1685987347279,"results":"22","hashOfConfig":"23"},{"size":7980,"mtime":1686941034296,"results":"24","hashOfConfig":"23"},{"size":1956,"mtime":1685270284014,"results":"25","hashOfConfig":"23"},{"size":571,"mtime":1683830219361,"results":"26","hashOfConfig":"23"},{"size":227,"mtime":1686681083962,"results":"27","hashOfConfig":"23"},{"size":1415,"mtime":1685253637002,"results":"28","hashOfConfig":"23"},{"size":753,"mtime":1686858368801,"results":"29","hashOfConfig":"23"},{"size":1587,"mtime":1685288336545,"results":"30","hashOfConfig":"23"},{"size":443,"mtime":1685204126609,"results":"31","hashOfConfig":"23"},{"size":1123,"mtime":1685288173012,"results":"32","hashOfConfig":"23"},{"size":84,"mtime":1684832607025,"results":"33","hashOfConfig":"23"},{"size":2026,"mtime":1685095511301,"results":"34","hashOfConfig":"23"},{"size":1295,"mtime":1685986463592,"results":"35","hashOfConfig":"23"},{"size":773,"mtime":1685094142360,"results":"36","hashOfConfig":"23"},{"size":1800,"mtime":1686939069469,"results":"37","hashOfConfig":"23"},{"size":1741,"mtime":1686940644562,"results":"38","hashOfConfig":"23"},{"size":377,"mtime":1686680231950,"results":"39","hashOfConfig":"23"},{"size":603,"mtime":1686939721072,"results":"40","hashOfConfig":"23"},{"size":224,"mtime":1686763633594,"results":"41","hashOfConfig":"23"},{"size":1027,"mtime":1686861918956,"results":"42","hashOfConfig":"23"},{"size":486,"mtime":1686934432862,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},"6udt6g",{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51"},{"filePath":"52","messages":"53","suppressedMessages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"55","messages":"56","suppressedMessages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"58","messages":"59","suppressedMessages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","suppressedMessages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"64","messages":"65","suppressedMessages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","suppressedMessages":"69","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"70","messages":"71","suppressedMessages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"73","messages":"74","suppressedMessages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"76","messages":"77","suppressedMessages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"79","messages":"80","suppressedMessages":"81","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"82","messages":"83","suppressedMessages":"84","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"85","messages":"86","suppressedMessages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","suppressedMessages":"96","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","suppressedMessages":"99","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","suppressedMessages":"102","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","suppressedMessages":"105","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"106","messages":"107","suppressedMessages":"108","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/aleksejolejnik/dev/react-mesto-auth/src/index.js",[],[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/App.js",["109"],[],"import React from 'react';\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\nimport {Route, Routes, Navigate, useNavigate} from 'react-router-dom';\nimport {ProtectedRoute} from \"./ProtectedRoute\";\nimport Header from \"../components/Header\";\nimport Main from \"../components/Main\";\nimport Footer from \"../components/Footer\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport PageNotFound from \"./PageNotFound\";\nimport {api} from \"../utils/Api\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport * as auth from '../utils/Auth';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({\n    avatar: '../images/loader.gif',\n    name: 'Загрузка',\n    about: 'Загрузка',\n    _id: ''\n  });\n\n  const navigate = useNavigate();\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userEmail, setUserEmail] = React.useState({email: ''});\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n  const [tooltip, setTooltip] = React.useState({image: '', message: ''});\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cardId, setCardId] = React.useState('');\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((error) => {\n        console.log(error)\n      });\n  }, [])\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((data) => {\n        setCards(data);\n      })\n      .catch\n      ((error) => {\n        console.log(error)\n      });\n  }, []);\n\n  const registerUser = ({email, password}) => {\n    auth.register({email, password})\n      .then((res) => {\n        setInfoTooltipOpen(true);\n        setTooltip({image: true,\n          message: 'Вы успешно зарегистрировались!'});\n        navigate('/signin', {replace: true});\n      })\n      .catch((err) => {\n        setInfoTooltipOpen(true);\n        setTooltip({image: false,\n          message: 'Что-то пошло не так!'});\n        console.log(err)\n      });\n  }\n\n  const handleLogin = () => {\n    setLoggedIn(true);\n  }\n\n  const handleSignOut = () => {\n    setLoggedIn(false);\n  }\n\n  const checkToken = () => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      auth.getContent(jwt)\n        .then(({data}) => {\n          setLoggedIn(true);\n          setUserEmail(data.email);\n          navigate(\"/main\", {replace: true})\n        })\n        .catch(error => console.log(error))\n    }\n  }\n\n  React.useEffect(() => {\n    checkToken();\n  }, []);\n\n  function handleUpdateUser(newUserData) {\n    api.setUserInfo(newUserData)\n      .then((userData) => {\n        setCurrentUser(userData);\n        closeAllPopups()\n      })\n      .catch((error) => {\n        console.log(error)\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error)\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n  function handleUpdateAvatar(userData) {\n    api.updateUserAvatar(userData)\n      .then((userAvatar) => {\n        setCurrentUser(userAvatar);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error)\n      });\n  }\n\n  React.useEffect(() => {\n    function handleEscPress(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups();\n      }\n    }\n\n    const handleOverlayClick = (evt) => {\n      if (evt.target.classList.contains('popup_opened')) {\n        closeAllPopups();\n      }\n    };\n    if (isEditProfilePopupOpen || isAddPlacePopupOpen || isEditAvatarPopupOpen || isConfirmDeletePopupOpen || selectedCard) {\n      document.addEventListener('keydown', handleEscPress);\n      document.addEventListener('click', handleOverlayClick);\n      return () => {\n        document.removeEventListener('keydown', handleEscPress);\n        document.removeEventListener('mousedown', handleOverlayClick);\n      }\n    }\n  }, [isEditProfilePopupOpen, isAddPlacePopupOpen, isEditAvatarPopupOpen, isConfirmDeletePopupOpen, selectedCard])\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard)\n  }\n\n  function handleCardDelete() {\n    api.deleteUserCard(cardId)\n      .then((res) => {\n        const newCard = cards.filter((item) => item._id !== cardId);\n        setCards(newCard);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error)\n      });\n  }\n\n  function handleDeletePlaceClick(card) {\n    setCardId(card);\n    setConfirmDeletePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setConfirmDeletePopupOpen(false);\n    setInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"Root\">\n        <div className=\"page\">\n          <Header loggedIn={loggedIn} handleSignOut={handleSignOut} userEmail={userEmail}/>\n          <Routes>\n            <Route path=\"/\" element={loggedIn ? <Navigate to=\"/main\"/> : <Navigate to=\"/signin\" replace/>}/>\n            <Route path=\"/main\" element={\n              <ProtectedRoute loggedIn={loggedIn} element={Main}\n                              onEditAvatar={handleEditAvatarClick}\n                              onEditProfile={handleEditProfileClick}\n                              onAddPlace={handleAddPlaceClick}\n                              cards={cards}\n                              onCardClick={handleCardClick}\n                              handleCardLike={handleCardLike}\n                              handleCardDeleteClick={handleDeletePlaceClick}\n              />\n            }\n            />\n            <Route path=\"/signin\" element={<Login handleLogin={handleLogin}/>}/>\n            <Route path=\"/signup\" element={<Register registerUser={registerUser}/>}/>\n            <Route path='*' element={<PageNotFound/>}/>\n          </Routes>\n          <Footer loggedIn={loggedIn}/>\n\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n          <ConfirmDeletePopup isOpen={isConfirmDeletePopupOpen} onClose={closeAllPopups}\n                              onConfirmDelete={handleCardDelete}/>\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n          />\n          <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} tooltip={tooltip}/>\n        </div>\n\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","/Users/aleksejolejnik/dev/react-mesto-auth/src/components/EditProfilePopup.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ImagePopup.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Footer.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Main.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Header.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/AddPlacePopup.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ConfirmDeletePopup.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/EditAvatarPopup.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/contexts/CurrentUserContext.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/utils/Api.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Card.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/PopupWithForm.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Login.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Register.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/PageNotFound.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/InfoTooltip.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/ProtectedRoute.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/utils/Auth.js",[],[],"/Users/aleksejolejnik/dev/react-mesto-auth/src/components/NavBar.js",[],[],{"ruleId":"110","severity":1,"message":"111","line":102,"column":6,"nodeType":"112","endLine":102,"endColumn":8,"suggestions":"113"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'checkToken'. Either include it or remove the dependency array.","ArrayExpression",["114"],{"desc":"115","fix":"116"},"Update the dependencies array to be: [checkToken]",{"range":"117","text":"118"},[3090,3092],"[checkToken]"]