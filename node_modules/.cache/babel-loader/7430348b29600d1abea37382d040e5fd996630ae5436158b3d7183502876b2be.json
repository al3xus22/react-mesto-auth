{"ast":null,"code":"import _defineProperty from\"/Users/aleksejolejnik/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/aleksejolejnik/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/aleksejolejnik/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import*as auth from\"../utils/Auth\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var handleLogin=_ref.handleLogin;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!formValue.email||!formValue.password){setErrorMessage('Both fields are required');return;}var email=formValue.email,password=formValue.password;auth.authorize({email:email,password:password}).then(function(data){if(data.token){localStorage.setItem('jwt',data.token);handleLogin();navigate('/main',{replace:true});}}).catch(function(err){return setErrorMessage(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"login__welcome\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"div\",{className:\"register__error\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formValue.email,onChange:handleChange,id:\"email\",placeholder:\"Email\",name:\"email\",minLength:\"2\",maxLength:\"40\"}),/*#__PURE__*/_jsx(\"span\",{className:\"login__error\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formValue.password,onChange:handleChange,id:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",minLength:\"2\",maxLength:\"200\"}),/*#__PURE__*/_jsx(\"span\",{className:\"login__error\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login__link\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}export default Login;","map":{"version":3,"names":["React","useState","auth","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","handleLogin","_useState","email","password","_useState2","_slicedToArray","formValue","setFormValue","_useState3","_useState4","errorMessage","setErrorMessage","navigate","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","authorize","then","data","token","localStorage","setItem","replace","catch","err","className","children","onSubmit","type","onChange","id","placeholder","minLength","maxLength"],"sources":["/Users/aleksejolejnik/dev/react-mesto-auth/src/components/Login.js"],"sourcesContent":["import React, {useState} from 'react';\nimport * as auth from \"../utils/Auth\";\nimport {useNavigate} from 'react-router-dom';\n\nfunction Login({handleLogin}) {\n  const [formValue, setFormValue] = useState({\n      email: '',\n      password: ''\n    }\n  )\n  const [errorMessage, setErrorMessage] = useState()\n  const navigate = useNavigate();\n  const handleChange = (e) => {\n    const {name, value} = e.target;\n    setFormValue({\n      ...formValue,\n      [name]: value\n    });\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!formValue.email || !formValue.password) {\n      setErrorMessage('Both fields are required');\n      return;\n    }\n    const {email, password} = formValue;\n    auth.authorize({email, password})\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem('jwt', data.token);\n          handleLogin();\n          navigate('/main', {replace: true});\n        }\n      })\n      .catch((err) => setErrorMessage(err));\n  }\n\n\n  return (\n    <div className=\"login\">\n      <p className=\"login__welcome\">\n        Вход\n      </p>\n      <div className=\"register__error\">{errorMessage}</div>\n      <form className=\"login__form\" onSubmit={handleSubmit}>\n        <input type=\"text\" value={formValue.email} onChange={handleChange} id=\"email\" placeholder=\"Email\"\n               name=\"email\"\n               minLength=\"2\" maxLength=\"40\"/>\n        <span className=\"login__error\"></span>\n        <input type=\"text\" value={formValue.password} onChange={handleChange} id=\"password\" placeholder=\"Пароль\"\n               name=\"password\"\n               minLength=\"2\" maxLength=\"200\"/>\n        <span className=\"login__error\"></span>\n        <button type=\"submit\" className=\"login__link\">Войти</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Login;"],"mappings":"iYAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,MAAO,GAAK,CAAAC,IAAI,KAAM,eAAe,CACrC,OAAQC,WAAW,KAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7C,QAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAgB,IAAd,CAAAC,WAAW,CAAAD,IAAA,CAAXC,WAAW,CACzB,IAAAC,SAAA,CAAkCV,QAAQ,CAAC,CACvCW,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CACF,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAJ,SAAA,IAJMK,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAK9B,IAAAI,UAAA,CAAwCjB,QAAQ,CAAC,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA3CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,GAAM,CAAAG,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAoB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1B,IAAAC,SAAA,CAAsBD,CAAC,CAACE,MAAM,CAAvBC,IAAI,CAAAF,SAAA,CAAJE,IAAI,CAAEC,KAAK,CAAAH,SAAA,CAALG,KAAK,CAClBX,YAAY,CAAAY,aAAA,CAAAA,aAAA,IACPb,SAAS,KAAAc,eAAA,IACXH,IAAI,CAAGC,KAAK,EACd,CAAC,CACJ,CAAC,CAED,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIP,CAAC,CAAK,CAC1BA,CAAC,CAACQ,cAAc,CAAC,CAAC,CAElB,GAAI,CAAChB,SAAS,CAACJ,KAAK,EAAI,CAACI,SAAS,CAACH,QAAQ,CAAE,CAC3CQ,eAAe,CAAC,0BAA0B,CAAC,CAC3C,OACF,CACA,GAAO,CAAAT,KAAK,CAAcI,SAAS,CAA5BJ,KAAK,CAAEC,QAAQ,CAAIG,SAAS,CAArBH,QAAQ,CACtBX,IAAI,CAAC+B,SAAS,CAAC,CAACrB,KAAK,CAALA,KAAK,CAAEC,QAAQ,CAARA,QAAQ,CAAC,CAAC,CAC9BqB,IAAI,CAAC,SAACC,IAAI,CAAK,CACd,GAAIA,IAAI,CAACC,KAAK,CAAE,CACdC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEH,IAAI,CAACC,KAAK,CAAC,CACvC1B,WAAW,CAAC,CAAC,CACbY,QAAQ,CAAC,OAAO,CAAE,CAACiB,OAAO,CAAE,IAAI,CAAC,CAAC,CACpC,CACF,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,QAAK,CAAApB,eAAe,CAACoB,GAAG,CAAC,GAAC,CACzC,CAAC,CAGD,mBACElC,KAAA,QAAKmC,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBtC,IAAA,MAAGqC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,0BAE9B,CAAG,CAAC,cACJtC,IAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEvB,YAAY,CAAM,CAAC,cACrDb,KAAA,SAAMmC,SAAS,CAAC,aAAa,CAACE,QAAQ,CAAEb,YAAa,CAAAY,QAAA,eACnDtC,IAAA,UAAOwC,IAAI,CAAC,MAAM,CAACjB,KAAK,CAAEZ,SAAS,CAACJ,KAAM,CAACkC,QAAQ,CAAEvB,YAAa,CAACwB,EAAE,CAAC,OAAO,CAACC,WAAW,CAAC,OAAO,CAC1FrB,IAAI,CAAC,OAAO,CACZsB,SAAS,CAAC,GAAG,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC,cACrC7C,IAAA,SAAMqC,SAAS,CAAC,cAAc,CAAO,CAAC,cACtCrC,IAAA,UAAOwC,IAAI,CAAC,MAAM,CAACjB,KAAK,CAAEZ,SAAS,CAACH,QAAS,CAACiC,QAAQ,CAAEvB,YAAa,CAACwB,EAAE,CAAC,UAAU,CAACC,WAAW,CAAC,sCAAQ,CACjGrB,IAAI,CAAC,UAAU,CACfsB,SAAS,CAAC,GAAG,CAACC,SAAS,CAAC,KAAK,CAAC,CAAC,cACtC7C,IAAA,SAAMqC,SAAS,CAAC,cAAc,CAAO,CAAC,cACtCrC,IAAA,WAAQwC,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,gCAAK,CAAQ,CAAC,EACxD,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAnC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}